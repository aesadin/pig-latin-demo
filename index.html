<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/bootstrap.css" rel="stylesheet" type = "text/css">
  <link rel="stylesheet" href="css/default.min.css" type="text/css">
  <link href="css/styles.css" rel="stylesheet" type = "text/css">
  <script src="js/highlight.min.js"></script>
  <script src="js/jquery-3.5.1.js"></script>
  <script src="js/scripts.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <title>Pig Latin Demo</title>
</head>
<body class="container">
  <header class="jumbotron">
    <h1 class="text-primary">Pig Latin Demo</h1>
    <h3>&#128055; Oink? Oink.</h3>
  </header>
  <section class="card border-success mb-3">
    <div class="card-header text-success">JS Logic A</div>
      <div class="card-body">
        <form id="form1">
            <p class="card-text">Type a sentence to be converted:</p>
            <input type="text" id="input" class="form-control" required>
        </form>
      <button type="submit" class="btn btn-success" form="form1">Submit</button>
    </div>
  </section>
  <section class="card border-info mb-3">
    <div class="card-header text-info">JS Logic B</div>
      <div class="card-body">
        <form id="form2">
            <p class="card-text">Type a sentence to be converted:</p>
            <input type="text" id="input2" class="form-control" required>
        </form>
      <button type="submit" class="btn btn-info" form="form2">Submit</button>
    </div>
  </section>

    <section class="card border-warning mb-3">
      <div class="card-header text-warning">scripts.js</div>
          <pre>
            <code class="javascript">
//LOGIC A
//USER INPUT LOGIC
$(document).ready(function() {
  $("#form1").submit(function(event) {
    event.preventDefault();
    let outputSentence = (makeSentencePigLatin(getInputSentence()));
    $("#output").text(outputSentence);
  });
});

//this function gets the input sentence from the field
function getInputSentence () {
  let inputSentence = $("#input").val();
  return inputSentence;
}

//BUSINESS LOGIC
//this function takes a sentence array and applies the makeWordPigLatin function to each word, then joins it back and returns a string
function makeSentencePigLatin (inputSentence) {
  let inputSentenceArray = inputSentence.split(" ")     //splits the input sentence string into an array
  let outputSentenceArray = [];
  inputSentenceArray.forEach(function (word) {
    outputSentenceArray.push(makeWordPigLatin(word, findCutPosition(word)));    //for each word in the array, make that word pig latin
  });
  return outputSentenceArray.join(" ")      //join the array back into a string to be displayed
}

//this function finds where the first vowel occurs in an input word, and sets that to the cut position for later manipulation
function findCutPosition (inputWord) {
  let cutPosition;
  for (i = 0; i < inputWord.length; i++) {    
    if (checkForVowels(inputWord.charAt(i)) === true) {     //checks if each letter is a vowel
      cutPosition = i;      //when it finds a vowel, add that index value as the cut position
      if (inputWord.charAt(cutPosition) === "u" && inputWord.charAt(cutPosition - 1) === "q") {    //if the vowel is u, checks if it has a q before it, if so it adds 1 to the cut position so that both the q and u will be cut
        cutPosition ++;
      }
      return cutPosition;
    }
  }
}

//this function checks whether an input character is a vowel
function checkForVowels (inputCharacter) {
  const vowels = ["a", "e", "i", "o", "u",]
  let isVowel;
  for (v = 0; v < vowels.length; v++) {    //checks each vowel against the input character, returns true or false, since this is called in another for loop, the index variable cant be the same
    if (vowels[v] === inputCharacter.toLowerCase()) {     //compares against the toLowerCase of the input character to prevent any issues with capitalization
      isVowel = true;
      break;
    }
  }
  return isVowel;
}

//this function takes an input word and cut position, and outputs the word in pig latin
function makeWordPigLatin (inputWord, cutPosition) {
  let outputWord;
  if (cutPosition === 0) {      //if the cut position is zero, the first letter is a vowel
    outputWord = inputWord + "way";
  } else {      //otherwise the first letter or letters are consonants and are chopped off and put on the end
    outputWord = inputWord.slice(cutPosition) + inputWord.slice(0, cutPosition) + "ay";    
  }
  return outputWord;
}

//LOGIC B - As dry as possible
//USER INPUT LOGIC
$(document).ready(function() {
  $("#form2").submit(function(event) {
    event.preventDefault();
    $("#output").text($("#input2").val().split(" ").map(word => makeWordPigLatinB(word)).join(" "));
  });
});

//BUSINESS LOGIC
function makeWordPigLatin (inputWord) {  
  const vowels = ["a", "e", "i", "o", 'u'];
  for (i = 0; i < inputWord.length; i++) {
    if (vowels.indexOf(inputWord.charAt(i)) !== -1) {
      break;
      }
    if (inputWord.slice(i, i + 2) === "qu") { 
      i++;
      }
  }
  if (i === 0) {
    return inputWord + "way";
  } else {
    return inputWord.slice(i) + inputWord.slice(0, i) + "ay";
  }
}
            </code>
          </pre>
    </section>
  </div>
  <section>
    <p id="output" class="text-primary"></p>
  </section>
</body>
</html>
